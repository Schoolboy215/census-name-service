<!DOCTYPE html>
<html data-theme="dark">
<head>
  <title>OpenAPI Docs</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20,400,0,0&icon_names=search" />
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.9/dist/css/autoComplete.02.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.9/dist/autoComplete.min.js"></script>
  <style>#search-button {
  position: fixed;
  top: 28px;
  right: 28px;
  z-index: 10;
  display: flex;
  align-items: center;
  background-color: #fff;
  border-radius: 4px;
  border: 1px solid #d9d9d9;
  padding: 4px 12px 4px 8px;
  cursor: pointer;

  .icon {
    font-size: 18px;
    margin-right: 4px;
  }
}

#search-dialog {
  position: fixed;
  top: 10px;
  margin: 0 auto;
  height: 100%;
  background: transparent;
  border: none;

  .auto-complete-list {
    max-height: 265px;
  }
}

#auto-complete {
  background-color: #fff;
}

.auto-complete-list {
  .auto-complete-list-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
    border-radius: 0;
  }
}

.method-tag {
  display: inline-block;
  padding: 2px 0;
  border-radius: 4px;
  font-size: 11px;
  color: #fff;
  min-width: 54px;
  text-align: center;
  flex-shrink: 0;
}

.endpoint-info {
  display: flex;
  flex-direction: column;
  flex: 1;
  word-break: break-all;
  overflow-wrap: break-word;
  white-space: normal;
}

.endpoint-path {
  font-size: 13px;
}

.endpoint-summary {
  font-size: 11px;
  color: #666;
}

[data-theme=dark] {
  #search-dialog::backdrop {
    background-color: rgba(255, 255, 255, 0.1);
  }

  #search-button {
    background-color: #1f1f1f;
    border: 1px solid #444;
    color: #fff;
  }

  #auto-complete {
    background-color: #1f1f1f;
    border: 1px solid #444;
    color: #fff;
  }

  .auto-complete-list {
    background-color: #1f1f1f;
    border: 1px solid #444;

    .auto-complete-list-item {
      background-color: #1f1f1f;
      border-bottom: 1px solid #444;
      color: #fff;

      &:hover {
        background-color: #333;
      }
    }

    .auto-complete-list-item[aria-selected="true"] {
      background-color: #333;
    }
  }

  .endpoint-path {
    color: #ccc;
  }

  .endpoint-summary {
    color: #888;
  }
}</style>
  <style>body {
  margin: 0;
  padding: 0;
}

[data-theme=dark] {
  body {
    background-color: #000000;
  }

  .react-tabs__tab--selected {
    border: none !important;
    background-color: #3f3f46 !important;
  }
}

.method-get {
  background-color: rgb(47, 129, 50);
}

.method-post {
  background-color: rgb(24, 111, 175);
}

.method-put {
  background-color: rgb(149, 80, 124);
}

.method-patch {
  background-color: rgb(149, 80, 124);
}

.method-delete {
  background-color: rgb(204, 51, 51);
}

.method-head {
  background-color: rgb(162, 61, 173);
}

.method-options {
  background-color: rgb(148, 112, 20);
}

.method-trace {
  background-color: #000;
}</style>
  <script>window.apiDocs = {"openapi":"3.0.0","info":{"version":"1.0.0","title":"Census names","description":"API that generates realistic American names from public census bureau and social security administration data"},"servers":[{"url":"v1"}],"components":{"schemas":{},"parameters":{}},"paths":{"/api/firstName":{"post":{"description":"Get a random first name with optional filters for sex, year of birth, and state as well as rarity.","summary":"Get a random first name.","requestBody":{"description":"Optional filters","content":{"application/json":{"schema":{"type":"object","properties":{"sex":{"type":"string","enum":["M","F"],"example":"M"},"yob":{"type":"number","minimum":1910,"maximum":2023,"example":1970},"state":{"type":"string","enum":["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],"example":"OK"},"percentile":{"type":"integer","minimum":1,"maximum":100},"top":{"type":"string","enum":["true","false"]}}}}}},"responses":{"200":{"description":"Object with name information.","content":{"application/json":{"schema":{"type":"object","properties":{"firstName":{"type":"string","example":"MARK"}},"required":["firstName"]}}}}}}},"/api/lastName":{"post":{"description":"Get a random last name with optional filters for race and rarity.","summary":"Get a random last name.","requestBody":{"description":"Optional filters","content":{"application/json":{"schema":{"type":"object","properties":{"race":{"type":"string","enum":["white","black","asian","native","hispanic"],"example":"white"},"percentile":{"type":"integer","minimum":1,"maximum":100},"top":{"type":"string","enum":["true","false"]}}}}}},"responses":{"200":{"description":"Object with name information.","content":{"application/json":{"schema":{"type":"object","properties":{"lastName":{"type":"string","example":"SMITH"}},"required":["lastName"]}}}}}}},"/api/fullName":{"post":{"description":"Get a random full name with optional filters for sex, year of birth, state, and race as well as rarity.","summary":"Get a random full name.","requestBody":{"description":"Optional filters","content":{"application/json":{"schema":{"type":"object","properties":{"sex":{"type":"string","enum":["M","F"],"example":"M"},"yob":{"type":"number","minimum":1910,"maximum":2023,"example":"1970"},"state":{"type":"string","enum":["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],"example":"OK"},"race":{"type":"string","enum":["white","black","asian","native","hispanic"],"example":"white"},"percentile":{"type":"integer","minimum":1,"maximum":100},"top":{"type":"string","enum":["true","false"]}}}}}},"responses":{"200":{"description":"Object with name information.","content":{"application/json":{"schema":{"type":"object","properties":{"firstName":{"type":"string","example":"MARK"},"lastName":{"type":"string","example":"SMITH"}},"required":["firstName","lastName"]}}}}}}}}}</script>
</head>
<body>
  <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"> </script>
  <button id="search-button">
    <span class="icon material-symbols-outlined">search</span>
    <span class="text"></span>
  </button>
  <dialog id="search-dialog">
    <input id="auto-complete" autocomplete="off">
  </dialog>
  <div id="redoc-container"></div>
  <script>// eslint-disable-next-line no-unused-vars
class SearchDialog {
  dialog
  autocomplete

  constructor(dialogId, inputId, openapi) {
    this.dialog = document.getElementById(dialogId)
    if (!this.dialog) {
      throw new Error(`Dialog with id "${dialogId}" not found`)
    }

    this.autocomplete = new autoComplete({
      selector: `#${inputId}`,
      placeHolder: 'Search endpoints',
      data: {
        src: this.filterEndpoints(openapi),
        keys: ['searchKey'],
      },
      searchEngine: 'loose',
      threshold: 0,
      resultsList: {
        maxResults: undefined,
        class: 'auto-complete-list',
        element: (list, data) => {
          if (data.results.length > 0) {
            list.innerHTML = ''
            data.results.forEach((item) => {
              const li = document.createElement('li')
              li.className = 'auto-complete-list-item'
              li.innerHTML = `
              <div class="method-tag method-${item.value.method.toLowerCase()}">${item.value.method}</div>
              <div class="endpoint-info">
                <div class="endpoint-path">${item.value.path}</div>
                <div class="endpoint-summary">${item.value.summary}</div>
              </div>
            `
              list.appendChild(li)
            })
          }
        },
      },
    })

    this.dialog.addEventListener('click', (event) => {
      if (event.target === this.dialog) {
        this.hide()
      }
    })
  }

  on(event, callback) {
    if (event === 'select') {
      this.autocomplete.input.addEventListener('selection', (event) => {
        callback(event.detail.selection.value)
      })
    } else {
      throw new Error(`Unsupported event: ${event}`)
    }
  }

  show() {
    this.autocomplete.input.value = ''
    this.autocomplete.start()
    this.dialog.showModal()
  }

  hide() {
    this.dialog.close()
  }

  filterEndpoints(openapi) {
    const endpoints = []
    const paths = openapi.paths
    for (const path in paths) {
      const methods = Object.keys(paths[path])
      for (const method of methods) {
        if (method === 'parameters') {
          continue
        }
        const summary = paths[path][method].summary || ''
        endpoints.push({
          searchKey: `${method} ${path} ${summary}`,
          method: method.toUpperCase(),
          path,
          operationId: paths[path][method].operationId,
          tag: paths[path][method].tags
            ? paths[path][method].tags[0]
            : 'default',
          summary,
        })
      }
    }
    return endpoints
  }
}
</script>
  <script>const THEMES = ['light', 'dark']
const themeParam = new URLSearchParams(window.location.search).get('theme')
if (THEMES.includes(themeParam)) {
  document.documentElement.setAttribute('data-theme', themeParam)
}

// refs. https://github.com/dilanx/redark
const redark = {
  codeBlock: {
    backgroundColor: '#18181b',
  },
  colors: {
    error: {
      main: '#ef4444',
    },
    border: {
      light: '#27272a',
      dark: '#a1a1aa',
    },
    http: {
      basic: '#71717a',
      delete: '#ef4444',
      get: '#22c55e',
      head: '#d946ef',
      link: '#06b6d4',
      options: '#eab308',
      patch: '#f97316',
      post: '#3b82f6',
      put: '#ec4899',
    },
    primary: {
      main: '#71717a',
    },
    responses: {
      error: {
        backgroundColor: 'rgba(239,68,68,0.1)',
        borderColor: '#fca5a5',
        color: '#ef4444',
        tabTextColor: '#ef4444',
      },
      info: {
        backgroundColor: 'rgba(59,131,246,0.1)',
        borderColor: '#93c5fd',
        color: '#3b82f6',
        tabTextColor: '#3b82f6',
      },
      redirect: {
        backgroundColor: 'rgba(234,179,8,0.1)',
        borderColor: '#fde047',
        color: '#eab308',
        tabTextColor: '#eab308',
      },
      success: {
        backgroundColor: 'rgba(34,197,94,0.1)',
        borderColor: '#86efac',
        color: '#22c55e',
        tabTextColor: '#22c55e',
      },
      warning: {
        main: '#eab308',
      },
    },
    secondary: {
      main: '#3f3f46',
      light: '#27272a',
    },
    success: {
      main: '#22c55e',
    },
    text: {
      primary: '#fafafa',
      secondary: '#d4d4d8',
      light: '#3f3f46',
    },
  },
  fab: {
    backgroundColor: '#52525b',
    color: '#67e8f9',
  },
  rightPanel: {
    backgroundColor: '#27272a',
    servers: {
      overlay: {
        backgroundColor: '#27272a',
      },
      url: {
        backgroundColor: '#18181b',
      },
    },
  },
  schema: {
    linesColor: '#d8b4fe',
    typeNameColor: '#93c5fd',
    typeTitleColor: '#1d4ed8',
  },
  sidebar: {
    activeTextColor: '#ffffff',
    backgroundColor: '#18181b',
    textColor: '#a1a1aa',
  },
  typography: {
    code: {
      backgroundColor: '#18181b',
      color: '#fde047',
    },
    links: {
      color: '#0ea5e9',
      hover: '#0ea5e9',
      textDecoration: 'none',
      hoverTextDecoration: 'underline',
      visited: '#0ea5e9',
    },
  },
  extensionsHook: (c) => {
    if (c === 'UnderlinedHeader') {
      return {
        color: '#a1a1aa',
        fontWeight: 'bold',
        borderBottom: '1px solid #3f3f46',
      }
    }
  },
}

let option = {
  disableSearch: true,
}
if (document.documentElement.getAttribute('data-theme') === 'dark') {
  option = { theme: redark }
}

// ref. https://redocly.com/docs/redoc/deployment/html#the-redoc-object
Redoc.init(window.apiDocs, option, document.getElementById('redoc-container'))

// ref. https://developer.mozilla.org/en-US/docs/Web/API/Navigator/platform#examples
const modifierKeyPrefix =
  navigator.platform.startsWith('Mac') || navigator.platform === 'iPhone'
    ? '⌘' // command key
    : '^' // control key

const searchButton = document.querySelector('#search-button')
searchButton.addEventListener('click', () => searchDialog.show())
searchButton.querySelector('.text').textContent =
  `Search ${modifierKeyPrefix}+K`

// eslint-disable-next-line no-undef
const searchDialog = new SearchDialog(
  'search-dialog',
  'auto-complete',
  window.apiDocs,
)
searchDialog.on('select', (selection) => {
  const tag = selection.tag
  const operationId = selection.operationId
  const url = new URL(location.href)
  url.hash = `#tag/${tag}/operation/${operationId}`
  location.href = url.toString()
  searchDialog.hide()
})

document.addEventListener('keydown', function (e) {
  const isCmdOrCtrl = modifierKeyPrefix === '⌘' ? e.metaKey : e.ctrlKey
  if (isCmdOrCtrl && e.key.toLowerCase() === 'k') {
    searchDialog.show()
    e.preventDefault()
  }
})
</script>
</body>
</html>